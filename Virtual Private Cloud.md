---
Tags:
  - AWS
aliases:
  - VPC
---
## what
- パブリッククラウド内に構築される、論理的に隔離されたプライベートな仮想ネットワーク空間
### メリット
- ネットワーク内の通信経路を絞って監視・アクセス制御を行うことができる→セキュリティ向上
- 通信経路を明示的に制御して[[ロードバランサー]]などでスケールアウトできる→性能の担保
- 通信経路を明示的に複数確保できる→[[可用性]]の向上
### 構成要素
- ネットワーク空間
	- リージョン
	- アベイラビリティゾーン
	- [[IPアドレス|サブネット]]
- 通信経路
	- ルートテーブル
	- インターネットゲートウェイ
	- [[Network Address Transition|NATゲートウェイ]]
- セキュリティ
	- ネットワークACL
	- セキュリティグループ
-  ロギング
	- [[VPCフローログ]]
- サーバー
	- [[EC2]]
	- [[AWS ECS|ECS]]
	- [[AWS Lambda|Lambda]]
- ...
## how
- マルチAZ構成にする
### ルーティング
- ルートテーブルを使用してサブネットごとにルーティングを制御する（オンプレミスではルーターが担当する）
### セキュリティ
- [[ファイアウォール]]に相当する機能として、[[ネットワークACL]]、[[セキュリティグループ]]、ネットワークファイアウォールが提供されている
- サブネットへのアクセス制御は[[ネットワークACL]]を、インスタンスへのアクセス制御は[[セキュリティグループ]]を使用する
- 設定が簡単かつ柔軟な[[セキュリティグループ]]を優先的に使用する

| 名称             | 外部側フィルタ対象                                    | フィルタ方式            | 戻り通信の扱い         | 内部側フィルタ対象           |
| -------------- | -------------------------------------------- | ----------------- | --------------- | ------------------- |
| [[ネットワークACL]]  | [[IPアドレス]] + ポート番号 + プロトコル                   | ホワイトリスト + ブラックリスト | ステートレス          | サブネットごと             |
| [[セキュリティグループ]] | [[IPアドレス]]（セキュリティグループIDなども可） + ポート番号 + プロトコル | ホワイトリスト           | ステートフル          | インスタンス、セキュリティグループごと |
| ネットワークファイアウォール | [[IPアドレス]]（ドメインリストも可） + ポート番号 + プロトコル        | ホワイトリスト + ブラックリスト | ステートフル + ステートレス | サブネットごと             |
## references
- [Amazon VPCを「これでもか！」というくらい丁寧に解説 #AWS - Qiita](https://qiita.com/c60evaporator/items/2f24d4796202e8b06a77)
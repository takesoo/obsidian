---
aliases:
  - swap
---
## what
- [[Random Access Memory|RAM]]が不足した時のために、[[ディスク]]の一部を一時的な[[仮想メモリ]]として扱う領域
- ディスクはRAMよりはるかに遅いのでスワップに頼りすぎると全体のパフォーマンスが落ちることに注意。あくまでもワークアラウンド。
## why
- 処理中のデータをスワップ領域に保存してRAMを空けるため
## how
```bash
$ free -h
               total        used        free      shared  buff/cache   available
Mem:           904Mi       160Mi       535Mi       0.0Ki       208Mi       614Mi
Swap:             0B          0B          0B

# 1GBの/swapfileを作成する
# fallocate: 指定したサイズのディスク領域を確保する
$ fallocate -l 1G /swapfile
# セキュリティのためにroot専用権限に
$ chmod 600 /swapfile
# スワップとして使える形式に
# mkswap: 対象ファイルにスワップ用のメタデータを先頭に書き込む
$ mkswap /swapfile
# 有効化
$ swapon /swapfile
$ free -h
               total        used        free      shared  buff/cache   available
Mem:           904Mi       161Mi       531Mi       0.0Ki       211Mi       613Mi
Swap:          1.0Gi          0B       1.0Gi
```
---
tags:
  - AWS/IAM
aliases:
  - Identity and Access Management
---
- 認証認可
- 「誰（何）が」「何に対して」「どのような操作を」「どの条件で」実行できるかを制御するサービス
- 最小権限の原則
## 構成要素
### Principal
- リクエストを行う主体。
	- ユーザー
	- ロール
	- AWSサービス
### User
- 人およびアプリケーションを表すエンティティ。
- 直接ポリシーをアタッチできるが、現在は一時的にロールを付与する運用（[[AssumeRole|SwitchRole]]）が好まれる
### Group
- ユーザーの論理的な集合
- 例：運用、開発、管理
### Role
- 一時的に引き受けることができる権限のセット
- ユーザーやAWSサービス、外部システムが一時的に特定の権限を取得する際に使用する
### Policy
- 権限を定義するJSONドキュメント
- 定義方法による種類
	- AWS管理ポリシー：AWSが提供する定義済みポリシー
	- カスタマー管理ポリシー：ユーザーが独自に定義したポリシー
	- インラインポリシー：プリンシパルに直接埋め込まれる、ユーザーが独自に定義したポリシー
- 付与する先による種類
	- アイデンティティベースのポリシー：IAMユーザー、IAMグループ、IAMロールに関連づけるポリシー
	- リソースベースのポリシー：AWSサービスに関連づけるポリシー
- 信頼ポリシー：[[AssumeRole]]設定のためのポリシー
```json
// 「arn:aws:logs:*:*:*」リソースに対して、「ログの作成権限とS3へのフルアクセス権限」を「許可」する
{
	"Version": "2012-10-17",
	// 権限の具体的な定義
	"Statement": [
		{
			// 許可or拒否
			"Effect": "Allow", // "Allow"|"Deny"
			// 実行可能な操作
			"Action": [
				"logs:CreateLogGroup",
				"logs:CreateLogStream",
				"logs:PutLogEvents",
				"s3:*"
			],
			// 操作対象のリソース
			"Resource": "arn:aws:logs:*:*:*"
		}
	]
}
```
## 評価プロセス
1. 明示的なDeny
2. 明示的なAllow
3. 何も定義されていなければ拒否
![[Pasted image 20240606185944.png]]
## ベストプラクティス
- ルートユーザーの厳格な管理
	- ルートユーザーは絶対に日常業務で使用せず、MFA（多要素認証）を必須設定し、アクセスキーは作成しません。
	- アカウント作成後は即座にIAMユーザーまたはIAM Identity Centerに移行します。
- 一時的認証情報の優先使用
	- アクセスキーのような長期認証情報は避け、IAMロールと[[AWS STS]]を活用する
	- 
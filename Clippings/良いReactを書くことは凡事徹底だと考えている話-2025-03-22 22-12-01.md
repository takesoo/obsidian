---
finished reading: true
favorite: true
tags:
  - clippings
---
# è‰¯ã„Reactã‚’æ›¸ãã“ã¨ã¯å‡¡äº‹å¾¹åº•ã ã¨è€ƒãˆã¦ã„ã‚‹è©±
  #ReadItLater 
 #ReadableArticle

## articleURL
https://kaminashi-developer.hatenablog.jp/entry/2025/3/17/intro-react

## siteName
ã‚«ãƒŸãƒŠã‚· ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ–ãƒ­ã‚°

## date
2025-03-22

## articleContent
![](https://cdn-ak.f.st-hatena.com/images/fotolife/k/kaminashi-developer/20250314/20250314124221.jpg)

ã‚«ãƒŸãƒŠã‚·ã§ã€Webãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’ã—ã¦ã„ã‚‹ [osuzu](https://x.com/suzu415) ã§ã™ã€‚

ã“ã‚Œã¾ã§ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å°‚é–€å¤–ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‹ã‚‰Reactã‚’å­¦ã¶è‰¯ã„æ–¹æ³•ã‚„ãŠå‹§ã‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èã‹ã‚Œã‚‹åº¦ã«ã€ [å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://ja.react.dev/learn) ã®ãƒªãƒ³ã‚¯ã‚’è²¼ã‚‹æ—¥ã€…ã‚’éã”ã—ã¦ãã¾ã—ãŸãŒã€ä½•ã‹ã™ã”ã„ä¸Šé”æ–¹æ³•ãŒãªã„ã‚‚ã®ã‹ã¨æ™®æ®µæ„è­˜ã—ã¦ã„ã‚‹ã“ã¨ã‚’ã“ã®è¨˜äº‹ã§æ›¸ãèµ·ã“ã—ã¦ã¿ã¾ã—ãŸã€‚

æ–‡å­—ã«ã—ãŸçµæœã€ä¸­èº«ã«ãªã«ã‹ç‰¹åˆ¥ãªã“ã¨ã‚„é­”æ³•ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã¯ä¸€ã¤ã‚‚ãªãã€ã‚€ã—ã‚ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ä¸€èˆ¬ã«é€šãšã‚‹è©±ã°ã‹ã‚Šã«ãªã‚Šã¾ã—ãŸãŒã€ï¼ˆè‡ªæˆ’ã‚‚è¾¼ã‚ã¦ï¼‰å‡¡äº‹å¾¹åº•ã™ã‚‹ã“ã¨ã®é›£ã—ã•ã‚‚ã‚ã‚‹ã¨æ„Ÿã˜ã¦ãŠã‚Šãã®ä¸€åŠ©ã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚

â€» å‡¡äº‹å¾¹åº•ï¼šå¹³å‡¡ãªã“ã¨ã‚’éå‡¡ãªã»ã©ã«å®Ÿè¡Œã™ã‚‹ã“ã¨ã€‚ä¸€ã¤ä¸€ã¤ã®ç†è§£ã‚„å®Ÿè¡Œã¯å¹³æ˜“ã§ã‚‚ã€ãã‚Œã‚’å®Ÿè·µã—ç¶šã‘ã‚‹ã®ã¯é›£ã—ã„ã€‚

React Server Componentï¼ˆä»¥ä¸‹RSCï¼‰ã‚’æ¡ç”¨ã™ã‚‹ã‹ã§å¤‰ã‚ã‚‹éƒ¨åˆ†ã‚‚ã‚ã‚Šã¾ã™ãŒã€è¨˜äº‹ã®ä¾‹ã¯Client Componentã®è©±ãŒä¸­å¿ƒã¨ãªã‚Šã¾ã™ã€‚

## ä¸€ã¤ã®é–¢æ•°ã®è²¬å‹™ã¨ã‚³ãƒ¼ãƒ‰ã‚’å°ã•ãã™ã‚‹

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã‚„HTMLã‚’æ‰±ã†ãŸã‚ä¸€ã¤ã®é–¢æ•°ã®è¡ŒãŒå¢—ãˆã¦ã—ã¾ã†ã®ã¯ä»•æ–¹ãªã„ã§ã™ãŒã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒæ‰±ã†ãƒ­ã‚¸ãƒƒã‚¯ã‚„çŠ¶æ…‹ã™ã‚‰ä¸€ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã¾ã¨ã‚ã¦æ›¸ã„ã¦ã—ã¾ã†ã‚±ãƒ¼ã‚¹ãŒæ•£è¦‹ã—ã¾ã™ã€‚

ã‚¯ã‚½ãƒ‡ã‚«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã‚‹ã®ã¯ã‚„ã‚ã¾ã—ã‚‡ã†ã€‚

é–¢æ•°ã‚’å°ã•ãã—ã¾ã—ã‚‡ã†ã€‚

ç§ã¯ä¸€ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä¸­ã§å‘¼ã¶hooksï¼ˆRSCã§ã¯é–¢æ•°ï¼‰ã‚’5ã¤ä»¥å†…ã«ã™ã‚‹ã¨ãƒã‚¤ãƒ«ãƒ¼ãƒ«ã‚’æ±ºã‚ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å°ã•ãä¿ã¤ã‚ˆã†ã«æ„è­˜ã—ã¦ã„ã¾ã™ã€‚

ä»¥ä¸‹é–¢æ•°ã‚’å°ã•ãä¿ã¤ãŸã‚ã®å·¥å¤«ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

### é–¢æ•°ã‚’é–¢æ•°ã«æŠ½å‡ºã™ã‚‹

æ–‡å­—ã ã‘ã¿ã‚‹ã¨ä½•è¨€ã£ã¦ã‚“ã ã¨ãªã‚Šã¾ã™ãŒã€ã“ã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã¯ã‚¯ã‚½ãƒ‡ã‚«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®¹æ˜“ã«ä½œã£ã¦ã—ã¾ã„ãŒã¡ã§ã€æœ¬å½“ã«å‡ºæ¥ã¦ãªã„ã‚±ãƒ¼ã‚¹ãŒå¤šã„ã§ã™ã€‚

ä¾‹ãˆã°ã“ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã‚’ä¸€ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§å®šç¾©ã™ã‚‹ã®ã‚’ã‚ˆãè¦‹ã¾ã™ã€‚ã“ã®ä¸­ã«ã¯propsã§æ¸¡ã£ã¦ããŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’åŠ å·¥ã—è¡¨ç¤ºã™ã‚‹ã“ã¨ã€Dialogã‚’ç®¡ç†ã™ã‚‹ã“ã¨ã€Menuã‚’ç®¡ç†ã™ã‚‹ã“ã¨ãŒæ··åœ¨ã—ã¦ã„ã¾ã™ã€‚

function ExampleComponent(props: Props) {
  const \[isDialogOpen, setIsDialogOpen\] = useState(false);
  const \[isMenuOpen, setIsMenuOpen) = useState(false);

  const fooContent = useMemo(() \=> {
    
    return filtered;
  }, \[props.foo\]);

  const handleOpenMenu: MouseEventHandler<HTMLButtonElement\> = useCallback(
    (event) => {
      setIsMenuOpen(true);
    },
    \[setIsMenuOpen\],
  );

  const closeMenu = useCallback(() \=> {
    setIsMenuOpen(false);
  }, \[\]);

  const handleClickMenu = useCallback(() \=> {
    setIsDialogOpen(true);
    closeMenu();
  }, \[form.insert, name, closeMenu\]);

  const closeDialog = useCallback(() \=> {
    setIsDialogOpen(false);
    closeMenu();
  }, \[closeMenu\]);

  return (
    <div\>
      <Button
        type\="button"
        onClick\={handleOpenMenu}
      >
        ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã
      </Button\>
      <Menu
        open\={isMenuOpen}
        onClose\={closeMenu}
      >
        <MenuItem onClick\={handleClickMenu}\>ãƒ¡ãƒ‹ãƒ¥ãƒ¼</MenuItem\>
      </Menu\>
      {fooContent.length > 0 && (
        <div\>
          <FooContentDetail
            fooContent\={fooContent}
          />
        </div\>
      )}
      <Dialog
        isOpen\={isDialogOpen}
        onClose\={closeDialog}
      />
    </div\>
  );

ä»Šå›ã¯ä¾‹ç¤ºã®ãŸã‚ç°¡ç´ ã«ã—ã¦ã¾ã™ãŒã€ã“ã†ã—ãŸã‚³ãƒ¼ãƒ‰ã¯ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã§ã¯5~10å€ã®ã‚³ãƒ¼ãƒ‰é‡ã«ãªã‚‹ã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚Šã¾ã™ã€‚

ã“ã‚Œã‚’ã€Œã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’åŠ å·¥ã—è¡¨ç¤ºã™ã‚‹ã“ã¨ã€ã€ŒDialogã‚’ç®¡ç†ã™ã‚‹ã“ã¨ã€ã€ŒMenuã‚’ç®¡ç†ã™ã‚‹ã“ã¨ã€ã§åˆ†å‰²ã™ã‚‹ã¨ã“ã†ãªã‚Šã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰é‡ã¯å¢—ãˆã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ãŒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å°ã•ãä¿ã¤ã“ã¨ã§ã€ä¸€ã¤ä¸€ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒä½•ã‚’ã—ã¦ã‚‹ã‹æ˜ç¢ºã§èªçŸ¥ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚ â€» ä¾‹ç¤ºã®ãŸã‚ç°¡æ˜“ã«æ›¸ã„ã¦ã„ã¾ã™ã€‚å®Ÿéš›ã«ã‚„ã‚ã†ã¨ã™ã‚‹ã¨ãƒ­ã‚¸ãƒƒã‚¯ãŒé£›ã‚“ã ã‚Šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã ã‘ã§ç¶ºéº—ã«é–‰ã˜è¾¼ã‚ã‚‰ã‚Œãªã‹ã£ãŸã‚Šã—ã¾ã™ãŒã€ã“ã®å¾ŒRender hooksã§åˆ¥é€”ç´¹ä»‹ã—ã¾ã™ã€‚

function FooContentComponent({foo}) \=> {
  const fooContent = useMemo(() \=> {
    
    return filtered;
  }, \[foo\]);

  if (fooContent.length === 0) {
    return null;
  }

  return (
    FooContentDetail fooContent\={fooContent} 
  );
};

function MenuComponent({onMenuItemClick}) {
  const \[isMenuOpen, setIsMenuOpen\] = useState(false);

  const handleOpenMenu: MouseEventHandler<HTMLButtonElement\> = useCallback(() \=> {
    setIsMenuOpen(true);
  }, \[\]);

  const closeMenu = useCallback(() \=> {
    setIsMenuOpen(false);
  }, \[\]);

  return (
    div
      Button type\="button" onClick\={handleOpenMenu}
        ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã
      Button
      Menu open\={isMenuOpen} onClose\={closeMenu}
        MenuItem onClick\={() \=> { onMenuItemClick(); closeMenu(); }}ãƒ¡ãƒ‹ãƒ¥ãƒ¼MenuItem
      Menu
    div
  );
};

function DialogComponent() 
  
  
};

function LayoutComponent({ foo }: Props) {
  return (
    div
      MenuComponent onMenuItemClick\={~} 
      FooContentComponent foo\={foo} 
      DialogComponent 
    div
  );
};

å®Ÿã¯ã“ã†ã—ãŸæŠ½å‡ºã¯ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã¯å½“ãŸã‚Šå‰ã§ã¯ãªãã€React hooksï¼ˆé–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå«ã‚€ï¼‰ä»¥å‰ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ™‚é–“çš„å‡é›†ï¼ˆåŒã˜ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã«ä¾å­˜ã—ãŸã‚³ãƒ¼ãƒ‰ãŒå›ºã¾ã‚‹ï¼‰ã§ä½œã‚‰ã–ã‚‹ã‚’ãˆãªã„ã“ã¨ãŒå¤šã‹ã£ãŸã®ã§ã—ãŸã€‚ãã‚ŒãŒReact hooksã«ã‚ˆã£ã¦æ©Ÿèƒ½çš„å‡é›†ã§æ›¸ãã“ã¨ãŒç°¡å˜ã«ãªã‚Šã¾ã—ãŸã€‚

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã‚­ãƒ£ãƒªã‚¢ã®é•·ã„äººã§ã‚‚å¤§ãã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã£ã¦ã—ã¾ã†ã®ã¯ã€Hooksä»¥å‰ã®æ–‡åŒ–ã®å½±éŸ¿ã‚‚ã‚ã‚‹ã®ã‹ãªã¨ç§ã¯æ„Ÿã˜ã¦ã„ã¾ã™ã€‚é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¡ãƒªãƒƒãƒˆã‚’æ­£ã—ãèªè­˜ã§ããšã€Classã®ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ã§Deep modulesã‚’ä½œã£ã¦ã—ã¾ã†ã®ã§ã¯ã¨ã€‚

å‚è€ƒ: Vue.jsã§hooksã«é¡ã™ã‚‹æ©Ÿèƒ½ã‚’å°å…¥ã™ã‚‹RFCã®æ·»ä»˜ç”»åƒã€‚æ©Ÿèƒ½çš„å‡é›†ãŒå¯èƒ½ã«ãªã£ãŸæ§˜å­ãŒã‚ã‹ã‚Šã‚„ã™ã„ã€‚ [https://github.com/vuejs/rfcs/pull/42](https://github.com/vuejs/rfcs/pull/42)

![](https://user-images.githubusercontent.com/499550/62783026-810e6180-ba89-11e9-8774-e7771c8095d6.png)

### Render hooksãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç”¨ã„ã¦æŠ½å‡ºã™ã‚‹

Render hooksãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã„ã†hooksã®ä¸­ã§elementã‚’å®šç¾©ã—ã¦æŠ½å‡ºã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚çŠ¶æ…‹ã®ã‚«ãƒ—ã‚»ãƒ«åŒ–ã¨ã„ã†è¡¨ç¾ãŒä¼ã‚ã‚Šã‚„ã™ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ä¾‹ãˆã°Modalã®ã‚ˆã†ãªçŠ¶æ…‹ã‚„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒé£›åœ°ã«ãªã‚Šã‚„ã™ã„ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã‚’

function ExampleComponent() {
  const \[isOpen, setIsOpen\] = useState(false);
  const onOpen = useCallback(() \=> setIsOpen(true), \[setIsOpen\]);
  const onClose = useCallback(() \=> setIsOpen(false), \[setIsOpen\]);
  
  
  
  return (
      
          SomeComponent
            ~
            Button onOpen\={onOpen} 
            ~
          SomeComponent
          Modal isOpen\={isOpen} onClose\={onClose} 
      
  )
}

ã“ã®ã‚ˆã†ã«ã—ã¦æŠ½å‡ºã§ãã¾ã™ã€‚

const useModal = () \=> {
  const \[isOpen, setIsOpen\] = useState(false);
  const onOpen = useCallback(() \=> setIsOpen(true), \[setIsOpen\]);
  const onClose = useCallback(() \=> setIsOpen(false), \[setIsOpen\]);
  const renderModal = (Modal isOpen\={isOpen} onClose\={onClose} );
  
  return {
      onOpen,
      renderModal
 }
}

function ExampleComponent() {
  const { onOpen,renderModal } = useModal();
  
  
  
  return (
      
          SomeComponent
            ~
            Button onOpen\={onOpen} 
            ~
          SomeComponent
          {renderModal}
      
  )
}

ä»Šå›ã®ã‚ˆã†ãªã‚·ãƒ³ãƒ—ãƒ«ãªé–‹é–‰ãªã‚‰UIãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒæä¾›ã—ã¦ã‚‹hooksã‚’ä½¿ã†ã ã‘ã§ã‚‚ååˆ†ã§ã™ãŒã€ç¾å®Ÿã«ã¯onOpenã‚„onCloseæ™‚ã«åˆ¥ã®é–¢æ•°ã‚’å‘¼ã‚“ã ã‚Šä½•ã‹ã‚’fetchã—ã¦ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’è¡Œã†ãªã©è†¨ã‚Œã¦ã„ãã¨æ€ã„ã¾ã™ã€‚

Modalã®ã‚ˆã†ãªãƒ­ã‚¸ãƒƒã‚¯ã¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒé£›åœ°ã«ãªã£ã¦ã—ã¾ã†ã‚±ãƒ¼ã‚¹ã§ã¯ã“ã®ã‚ˆã†ãªRender hooksã§é–¢æ•°ã‚’å°ã•ãã—ãŸã‚Šå¿…è¦ã«å¿œã˜ã¦è²¬å‹™ã‚’åˆ†é›¢ã§ãã¾ã™ã€‚

### é–‘è©±ï¼šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åˆ†å‰²ã™ã‚‹ã“ã¨ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã«ã¤ãªãŒã‚‹ã“ã¨ã‚‚ã‚ã‚‹

ã“ã®ã‚ˆã†ã«çŠ¶æ…‹ã‚’è²¬å‹™ã”ã¨ã«é–‰ã˜è¾¼ã‚ãŸã‚Šã€å°ã•ãé–¢æ•°ã‚’åˆ†å‰²ã—ã¦ã„ã‚‹ã¨ã€çŠ¶æ…‹ã®å¤‰æ›´ãŒç‹­ã„ã‚¹ã‚³ãƒ¼ãƒ—ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã ã‘ã«é–‰ã˜ã‚‹ã®ã§ã€çµæœã¨ã—ã¦ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã«ã¤ãªãŒã‚‹ã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚Šã¾ã™ã€‚

è©³ç´°ã¯ä»¥ä¸‹ã®è¨˜äº‹ã«ã¦ã€‚çŠ¶æ…‹ã‚’Move Downã—ãŸã‚ŠRift Upã™ã‚‹ã“ã¨ã§ã€é©åˆ‡ãªç¯„å›²ã«æŒã¤å¤§åˆ‡ã•ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚

[https://overreacted.io/before-you-memo/](https://overreacted.io/before-you-memo/)

### é–‘è©±ï¼’ï¼šDeep modulesã‚’ã©ã†æ‰ãˆã‚‹ã‹

Deep modulesã¨ã„ã†è€ƒãˆæ–¹ãŒã‚ã‚Šã¾ã™ã€‚ï¼ˆå‡ºå…¸: [A Philosophy of Software Design](https://web.stanford.edu/~ouster/cgi-bin/book.php)ï¼‰

è‰¯ã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€å‡ºæ¥ã‚‹ã ã‘æ©Ÿèƒ½ã¯å¤§ããï¼ˆæ·±ãï¼‰ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯è–„ãã‚ã‚‹ã¹ãã¨ã„ã†ã‚‚ã®ã§ã™ã€‚

ç§ã¯ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«ãŠã„ã¦ãã‚Œã¯é–¢æ•°ã‚’å¤§ããã™ã‚‹ã“ã¨ã§ã¯ãªãã€ä½•ã‚’ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã™ã‚‹ã‹ã«ã‚ˆã£ã¦è¡¨ç¾ã™ã¹ãã ã¨æ€ã„ã¾ã™ã€‚

Public APIï¼ˆå¤–ã‹ã‚‰è¦‹ãŸæ™‚ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„hooksã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰ã¯å‡ºæ¥ã‚‹ã ã‘æ·±ã„æ©Ÿèƒ½ã‚’æä¾›ã™ã¹ãã ãŒã€ãã®ä¸­èº«ã®å®Ÿè£…ï¼ˆé–¢æ•°ï¼‰ã¯ç´°ã‹ãåˆ†å‰²ã™ã¹ãã§ã‚ã‚Šã€å¯¾ç«‹ã—ãªã„ã¨è€ƒãˆã¦ã¾ã™ã€‚

â€» é–¢æ•°ã¯ç´°ã‹ãåˆ†ã‘ãŸã„ã§ã™ãŒã€ãƒ•ã‚¡ã‚¤ãƒ«ã¯ç´°ã‹ãåˆ†ã‘ã™ããªã„æ–¹ãŒè‰¯ã„ã¨ã‚‚æ€ã„ã¾ã™ã€‚åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­ã«è¤‡æ•°ã®é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„hooksã‚’å®šç¾©ã—ã¦ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒ¡ã‚½ãƒƒãƒ‰ã‚’é©åˆ‡ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ç´°ã‹ãåˆ†ã‘ã‚‹ãƒ«ãƒ¼ãƒ«ã«ã—ã¦ã—ã¾ã†ã¨ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•ã‚‚ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚‚ï¼‰é¢å€’ã ã‹ã‚‰ä¸€ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«æ²¢å±±ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ›¸ã„ã¦ã—ã¾ã†å‚¾å‘ã«ãªã‚‹ã—ã€ãƒ•ã‚¡ã‚¤ãƒ«æ•°ãŒå¢—ãˆã™ãã¦åˆ¥ç¨®ã®è¤‡é›‘æ€§ã‚‚ç”Ÿã¾ã‚Œã¾ã™ã€‚

## è¤‡é›‘æ€§ã‚’å±€æ‰€åŒ–ã—ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã‚„ã™ã„çŠ¶æ…‹ã«ã™ã‚‹

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«ã¨ã£ã¦ãƒ†ã‚¹ãƒˆã—ã‚„ã™ã„ã‚³ãƒ¼ãƒ‰ã¨ã¯ã€ç¬¬ä¸€ã«DOMã‚„Reactã«ä¾å­˜ã—ãªã„ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚ã¤ã¾ã‚Šãƒ†ã‚¹ãƒˆã—ãŸã„ãƒ­ã‚¸ãƒƒã‚¯ã¯å¿…ãšç´”ç²‹ãªTypeScriptã®é–¢æ•°ã¨ã—ã¦åˆ‡ã‚Šå‡ºã—ã¾ã™ã€‚

ãã—ã¦ãã®é–¢æ•°ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã“ã¨ã‚’å„ªå…ˆã—ã¾ã™ã€‚ä»¥ä¸‹ã¯Vitestã®ä¾‹ã§ã™ã€‚fetchã—ãŸdataã‚’åŠ å·¥ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ›¸ãã‚±ãƒ¼ã‚¹ã ã¨ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

const uneasyLogic = (data: T) \=> {
  
  return null;
};

export const useSomething = () \=> {
  const { data: rawData } = useQuery(~);
  const data = useMemo(() \=> uneasyLogic(rawData), \[rawData\]);

  return {
    data,
  };
};

if (import.meta.vitest) {
  const { it, expect } = import.meta.vitest;
  const mockData: T = {};

  it("uneasyLogic", () \=> {
    expect(uneasyLogic(mockData)).toBe(null);
  });
}

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§ã„ã‚‹ã¨ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆã§ã¯ãªãã€useStateè‡ªä½“ã‚„useEffectè‡ªä½“ãªã©Reactè‡ªä½“ã®ãƒ†ã‚¹ãƒˆï¼ˆãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãªã©ï¼‰ã‚’ã—ã¦ã„ã‚‹ã¨ã—ã‹æ€ãˆãªã„ã‚³ãƒ¼ãƒ‰ã‚’ç›®ã«ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ãŒã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯ã©ã“ã«ãƒ†ã‚¹ãƒˆæ›¸ãã‹ãŒå¤§ãããƒ¡ãƒ³ãƒ†ã‚³ã‚¹ãƒˆã‚’å·¦å³ã—ã¾ã™ã€‚

ã¨ã‚Šã‚ãˆãšãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’å¢—ã‚„ã™ã®ã§ã¯ãªãã€ã‚³ãƒ¼ãƒ‰ã®è¤‡é›‘æ€§ã‚’å±€æ‰€åŒ–ã™ã‚‹ã“ã¨ã‚’æ„è­˜ã—ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®æœ‰ç„¡ã«é–¢ã‚ã‚‰ãšãƒ†ã‚¹ãƒˆã—ã‚„ã™ã„ã‚³ãƒ¼ãƒ‰ã«ã—ã¦ãŠãã®ãŒè‰¯ã„ã¨æ„Ÿã˜ã¾ã™ã€‚ï¼ˆãŸã ã—é™çš„è§£æã§ã‚«ãƒãƒ¼ã§ãã‚‹ãƒ†ã‚¹ãƒˆç¯„å›²ã¯ã—ã£ã‹ã‚Šåºƒã’ãŸæ–¹ãŒè‰¯ã„ï¼‰

ç§ã¯å¯èƒ½ãªé™ã‚Šã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„hooksã‚’ãƒ†ã‚¹ãƒˆã—ãªãã¦æ¸ˆã‚€ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ï¼ãƒ†ã‚¹ãƒˆã—ãŸã„è¤‡é›‘æ€§ã¯ãƒ†ã‚¹ãƒˆã—ã‚„ã™ã„å˜ä½ã®ç´”ç²‹TSé–¢æ•°ã«åˆ‡ã‚Šå‡ºã™ã“ã¨ã‚’æ„è­˜ã—ã¦ã„ã¾ã™ã€‚

## useEffectã‚’ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ãƒãƒƒãƒã¨ã—ã¦æ‰±ã†

Reactã¯ä¸€åº¦renderã®ä»•çµ„ã¿ã‚’ç†è§£ã™ã‚‹ã¨ã€å®£è¨€çš„ãªã‚†ãˆè„³å†…ã§å®Ÿè¡Œã—ã‚„ã™ããã“ãŒè‰¯ã„ã¨æ€ã£ã¦ã„ã¾ã™ãŒã€ã‚„ã¯ã‚ŠReactã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã§ç®¡ç†ã§ããªã„ä¾‹å¤–ã¯å­˜åœ¨ã—ã¾ã™ã€‚

Reactã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã§ç®¡ç†ã§ããªã„ä¾‹å¤–ã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ãƒãƒƒãƒã¨ã—ã¦ç”¨æ„ã•ã‚Œã¦ã‚‹ã®ãŒuseEffectã§ã™ã€‚

Reactã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã§è¡¨ç¾ã§ããªã„ã“ã¨ã€ä¾‹ãˆã°éåŒæœŸã§ã®fetchãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç®¡ç†ã™ã‚‹ã“ã¨ã‚„setIntervalãªã©WebAPIã¨åŒæœŸã™ã‚‹ã“ã¨ã¯useEffectã®é©åˆ‡ãªåˆ©ç”¨ã‚·ãƒ¼ãƒ³ã§ã™ã€‚ãŸã ã—fetchã¯Tanstack Queryã‚„SWRãªã©ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’é€šã—ã¦è¡Œã†ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ãŠã‚Šã€ãã‚‚ãã‚‚useEffectã¨ã„ã†é–¢æ•°ã¯ã‚¢ãƒ—ãƒªé–‹ç™ºä¸Šè§¦ã‚‹ã¹ããƒ¬ã‚¤ãƒ¤ãƒ¼ã§ã¯ãªãã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªé–‹ç™ºè€…ã®ã¿ãŒè§¦ã‚‹ã¹ããƒ¬ã‚¤ãƒ¤ãƒ¼ã§ã‚ã‚‹ã¨ã„ã†æ„è¦‹ã‚‚ã‚ã‚Šã€ç§ã¯åŒæ„ã—ã¦ã„ã¾ã™ã€‚

ç‰¹ã«useEffectã®ä¸­ã§setStateãªã©Reactã®çŠ¶æ…‹ç®¡ç†ã‚’è¡ŒãŠã†ã¨ã™ã‚‹ã‚±ãƒ¼ã‚¹ã¯ã€å¤§åŠãŒè¨­è¨ˆã‚‚ã—ãã¯è¦ä»¶ãŒæ‚ªã„ã§ã™ã€‚ï¼ˆè¦ä»¶ã®æ‚ªã•=ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ä¸Šé‡è¦ã§ã‚‚ãªã„ã®ã«Reactã®æ€§è³ªä¸Šflakyãªãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã«ãªã‚Šã†ã‚‹ä½“é¨“ã‚’è¦ä»¶ã«å…¥ã‚Œã¦ã—ã¾ã£ã¦ã„ã‚‹ï¼‰

ã¨ã«ã‹ãã“ã“ã«é–¢ã—ã¦ã¯ä¸€åº¦ [å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã¾ã¨ã‚](https://ja.react.dev/learn/you-might-not-need-an-effect#recap) ã ã‘ã§ã‚‚èª­ã¿ã¾ã—ã‚‡ã†ã€‚

ä»–ã«ã‚‚mountæ™‚ã«å®Ÿè¡Œã—ãŸã„ã‚ˆã†ãªdepsãŒãªã„useEffectã¯ [ref callback](https://react.dev/reference/react-dom/components/common#ref-callback) ã§ä»£æ›¿ã§ãã¾ã™ã€‚

ã‚ã‚‰ã‚†ã‚‹useEffectã¯ã‚¢ãƒ—ãƒªã«ã¨ã£ã¦ã®ä¾‹å¤–ã‚±ãƒ¼ã‚¹ã¨ã„ã£ã¦è‰¯ã„ã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å¿…ãšã‚³ãƒ¡ãƒ³ãƒˆï¼ˆãªãœã“ã®å®Ÿè£…ã«ã›ã–ã‚‹ã‚’å¾—ãªã‹ã£ãŸã®ã‹ï¼‰ã‚’æ›¸ãç¿’æ…£ã‚‚è‰¯ã„ã¨æ„Ÿã˜ã¾ã™ã€‚

[https://www.pandanoir.info/entry/2025/01/29/205439](https://www.pandanoir.info/entry/2025/01/29/205439)

## ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ï¼ˆçŠ¶æ…‹ï¼‰ã‚’é¿ã‘ã‚‹

çŠ¶æ…‹ã‚„å¤‰æ•°ã®ã‚¹ã‚³ãƒ¼ãƒ—ã¯å¯èƒ½ãªé™ã‚ŠçŸ­ãã™ã‚‹ã®ãŒè‰¯ã„ã“ã¨ã¯å…±é€šèªè­˜ã ã¨æ€ã„ã¾ã™ãŒã€ã¨ã«ã‹ããƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã¯å®‰æ˜“ã«ã“ã®ã‚¹ã‚³ãƒ¼ãƒ—ã‚’åºƒã‚ã«å–ã£ã¦ã—ã¾ã†ã‚±ãƒ¼ã‚¹ãŒæ•£è¦‹ã•ã‚Œã¾ã™ã€‚

HTMLãŒãƒ„ãƒªãƒ¼æ§‹é€ ãªã®ã‚‚ã‚ã‚Šã€é–¢æ•°ã®ãƒã‚¹ãƒˆãŒæ·±ãå¼•æ•°ãŒã²ãŸã™ã‚‰é€£é–ã™ã‚‹ã‚ˆã†ãªprops drillingã¨å‘¼ã°ã‚Œã‚‹å•é¡Œã‚‚ã‚ã‚Šã€ä¸€è¦‹ã™ã‚‹ã¨åˆ†ã‹ã‚Šã‚„ã™ãã‚³ãƒ¼ãƒ‰ã®è¡Œæ•°ãŒå¢—ãˆã¦ã—ã¾ã£ãŸã‚Šã™ã‚‹ã®ã§ã€çŠ¶æ…‹ã‚’global stateã¨ã—ã¦ç®¡ç†ã—ãŸã‚ŠPageã®ä¸Šéƒ¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§Context APIã‚’ç”¨ã„ã¦Pageå…¨ä½“ã«stateã®ã‚¹ã‚³ãƒ¼ãƒ—ã‚’æ‹¡å¤§ã•ã›ãŸã‚Šã™ã‚‹ã‚±ãƒ¼ã‚¹ã‚‚è¦‹ã¾ã™ã€‚ ãŒç§ã¯ã§ãã‚‹ã ã‘propsã‚’åˆ©ç”¨ã—Contextãªã©ã¯é¿ã‘ã‚‹ã¹ãã ã¨æ€ã„ã¾ã™ã€‚

APIã‚„ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã®å®Ÿè£…ã‚’ã™ã‚‹ã“ã¨ã‚’æƒ³åƒã—ã¦æ¬²ã—ã„ã§ã™ãŒã€Envã‚„Contextã®ã‚ˆã†ãªã‚°ãƒ­ãƒ¼ãƒãƒ«é ˜åŸŸã«å¯¾ã—ã¦ã€é–¢æ•°ã®å¼•æ•°ã‚’æ¸›ã‚‰ã™ç›®çš„ã§å¤‰æ•°ã‚’æ ¼ç´ã™ã‚‹ã‹èã‹ã‚ŒãŸã‚‰æ™®é€šãã‚“ãªã“ã¨ã¯é¿ã‘ã¾ã™ã‚ˆã­ï¼Ÿ

ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ä¸€èˆ¬è«–ã§ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ï¼ˆè¨€èªçš„ãªã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã§ãªãã¨ã‚‚ã‚¹ã‚³ãƒ¼ãƒ—ãŒæ¥µç«¯ã«å¤§ãã„å¤‰æ•°ï¼‰ã¯é¿ã‘ã‚‹ã¹ãã ã¨èªè­˜ã—ã¦ã‚‹ã¨æ€ã„ã¾ã™ãŒã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã¯å®‰æ˜“ã«å¤‰æ•°ã‚„çŠ¶æ…‹ã®ã‚¹ã‚³ãƒ¼ãƒ—ã‚’æ‹¡å¤§ã•ã›ã‚‹ã‚±ãƒ¼ã‚¹ãŒå¤šã„ã§ã™ã€‚

Props drillingã¯æ ¼å¥½ã‚ˆãè¦‹ãˆãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€çŠ¶æ…‹ã®ã‚¹ã‚³ãƒ¼ãƒ—ã‚’æœ€å°ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã—ã‚„ã™ã„ã—ä¾å­˜ã‚‚æ˜ç¢ºã§ã™ã€‚Reactã‚’å¤šå°‘æ›¸ã„ã¦çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã„å§‹ã‚ãŸã‚ãŸã‚Šã§ç‰¹ã«è¦‹ã‚‰ã‚Œã¾ã™ãŒã€å¿…è¦ä»¥ä¸Šã«Props drillingã‚’é¿ã‘ã¦ã—ã¾ã†ã‚±ãƒ¼ã‚¹ãŒå¤šã„ã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚

ã¾ãŸä¸€ç•ªè¾›ã„ã‚±ãƒ¼ã‚¹ãŒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„çŠ¶æ…‹ã‚’ã‚ã‚‹ã¹ãç¯„å›²ã«é–‰ã˜è¾¼ã‚ãŸã‚Šå°ã•ãã™ã‚‹è¨­è¨ˆã‚’ã‚µãƒœã‚‹ç›®çš„ã§ã€Storeãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã‚ˆã†ãªglobal stateã¨ãã‚Œã‚’å¤‰æ›´ã™ã‚‹actionsã‚’ä½œã£ã¦ã—ã¾ã†ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚ãƒšãƒ¼ã‚¸ã®ãƒ­ã‚¸ãƒƒã‚¯ãŒå°‘ãªã„ã†ã¡ã¯ä¸€è¦‹å°‘ãªã„ã‚³ãƒ¼ãƒ‰ã§æ›¸ã‘ã¦å¬‰ã—ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒè¤‡é›‘æ€§ãŒã™ãã«çˆ†ç™ºã—ã¾ã™ã€‚

è£œè¶³ã™ã‚‹ã¨ã€çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒæ‚ªã„ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

ç†è§£ã—ã¦ã„ã‚‹äººãŒãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã®ç›®çš„ã§ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®leafå´ã‹ã‚‰å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’çµã£ãŸsubscribeãŒã—ã‚„ã™ã„ã‚ˆã†ã«React Hook Formã‚„Valtioã‚’æ´»ç”¨ã™ã‚‹ã¨ã„ã£ãŸæ˜ç¢ºã«è‰¯ã„æ¡ç”¨ã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ã¾ãŸTanstack Queryã®ã‚ˆã†ãªã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã™ã‚‹ã®ã‚‚React Server Componentä»¥å‰ãªã‚‰è‰¯ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã ã¨æ€ã„ã¾ã™ã€‚

### é–‘è©±ï¼šContextã‚’ä½¿ã†ã¹ãå ´é¢

Contextï¼ˆContextã‚’é€šã—ãŸçŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå«ã‚€ï¼‰ã‚’æ˜ç¢ºã«ä½¿ã†ã¹ãã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°Snackbarã®ã‚ˆã†ãªUIã¯hooksã‚„é–¢æ•°ã§å‡ºã›ãŸæ–¹ãŒä¾¿åˆ©ã§ã™ãŒã€ã©ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰å‘¼ã°ã‚Œã‚‹ã‹åˆ†ã‹ã‚‰ãªã„ã‚‚ã®ãªã®ã§Contextã‚’åˆ©ç”¨ã™ã‚‹ã®ã¯ç†ã«ã‹ãªã£ã¦ã„ã¾ã™ã€‚

å…¬å¼ã§ã¯color themeã®ã‚ˆã†ãªã‚±ãƒ¼ã‚¹ã‚‚ç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ãŒã€ã©ã“ã‹ã‚‰åˆ©ç”¨ã•ã‚Œã‚‹ã‹åˆ†ã‹ã‚‰ãªã„ã‚‚ã®ï¼ˆåˆ©ç”¨ã‚¹ã‚³ãƒ¼ãƒ—ã‚’é™å®šã§ããªã„/é™å®šã™ã‚‹ã®ãŒä½™ã‚Šã«å¤§å¤‰ãªã‚‚ã®ï¼‰ã¯Context APIã‚’é€šã—ã¦æä¾›ã™ã‚‹ã®ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚Layoutå±¤ã§æä¾›ã—ã¦ã‚‹ã®ã«å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰çŠ¶æ…‹ã‚’èª­ã¿æ›¸ãã—ãŸã„å ´åˆãªã©ãŒè©²å½“ã—ã¾ã™ã€‚

### é–‘è©±2ï¼šå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®Context APIã«ã¤ã„ã¦

å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚‚ã¡ã‚ƒã‚“ã¨ [ä½¿ç”¨ä¸Šã®æ³¨æ„](https://ja.react.dev/learn/passing-data-deeply-with-context#before-you-use-context) ã¯è¨˜è¼‰ã•ã‚Œã¦ã‚‹ã®ã§ã™ãŒã€ã•ã£ã¨ã“ã®ãƒšãƒ¼ã‚¸ã‚’èª­ã‚€ã ã‘ã ã¨æ·±ããƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã™ã«ã¯Contextã‚’ä½¿ã†ã®ã­ã¨æ€ã£ã¦ã—ã¾ã†æ§‹æˆã«ãªã£ã¦ã„ã‚‹ã®ã§ã€ã‚‚ã†å°‘ã—Context APIã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã‚’æ›¸ã„ã¦æ¬²ã—ã‹ã£ãŸãªã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚

## ä¸€èˆ¬åŒ–ï¼ˆå…±é€šåŒ–ï¼‰ã§ã¯ãªãè²¬å‹™ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†ã‘ã‚’ã™ã‚‹

å…±é€šåŒ–ã—ãªã‹ã£ãŸã“ã¨ã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰é‡è¤‡ã®è¾›ã•ã‚ˆã‚Šã€å…±é€šåŒ–ã—ã¦ã—ã¾ã£ãŸã“ã¨ã§ç”Ÿã˜ã‚‹è‹¦ã—ã¿ã®æ–¹ãŒå¤§ãããªã„ã‹â€¦ã¨æ€ã£ãŸçµŒé¨“ãŒã“ã‚Œã¾ã§æ²¢å±±ã‚ã‚Šã¾ã—ãŸã€‚

å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„å…±é€šhooksã¨ã—ã¦åˆ‡ã‚Šå‡ºã™ã“ã¨ã«ã“ã ã‚ã£ã¦ã—ã¾ã†ã¨ã€ä¾‹ãˆã°Tableã®ã‚ˆã†ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å…±é€šåŒ–ã—ã¦ã—ã¾ã£ãŸãŸã‚ã«ã€å„ãƒšãƒ¼ã‚¸ã§å¾®å¦™ã«é•ã†ã‚¹ã‚¿ã‚¤ãƒ«ã‚„ä»•æ§˜ãªã©ã®é•ã„ã§ç„¡é™ã«propsãŒå¢—ãˆã¦ã„ã£ãŸã‚Šã€è¤‡é›‘ãªhooksã®çµ„ã¿åˆã‚ã›æ–¹ãŒå¿…è¦ã§ã€çµå±€å†…éƒ¨ã®å®Ÿè£…ã‚’ç´°ã‹ãçŸ¥ã‚‰ãªã„ã¨ä½¿ãˆãªã„ã¨ã„ã£ãŸã“ã¨ãŒèµ·ããŒã¡ã§ã™ã€‚

ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡ã‚’ãªãã™ã“ã¨ã‚’æ„è­˜ã™ã‚‹ã®ã§ã¯ãªãã€è²¬å‹™ã‚’ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†ã‘ã—ã¦ãã®è²¬å‹™ã®ã‚³ãƒ¼ãƒ‰ã¯ãã“ã«æ›¸ãï¼ˆçµæœã¨ã—ã¦å…±é€šåŒ–ã•ã‚Œã‚‹ã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚‹ï¼‰ã¨ä¸Šæ‰‹ãã„ãã‚±ãƒ¼ã‚¹ãŒå¤šã„ã¨æ€ã„ã¾ã™ã€‚

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«ã©ã†ã„ã£ãŸãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’è¨­ã‘ã‚‹ã¹ãã‹ã¯ã€çµ„ç¹”ã‚„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã«å¿œã˜ã¦ç•°ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«ã©ã‚Œã ã‘ãƒ­ã‚¸ãƒƒã‚¯ã‚’æŒã¤å¿…è¦ãŒã‚ã‚‹ã‹ã€æ°¸ç¶šåŒ–å±¤ã¯ã©ã“ã«æŒã¤ã‹ã€Readã¨Writeã®ãƒãƒ©ãƒ³ã‚¹ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ–¹å¼ã¯ä½•ã‹ã€BFFã¯å­˜åœ¨ã™ã‚‹æ§‹æˆã‹ã€SEOã‚„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚„å¯ç”¨æ€§ã«ã©ã®ç¨‹åº¦è€ƒæ…®å¿…è¦ã‹ãªã©â€¦

ã“ã‚Œã°ã‹ã‚Šã¯è‡ªåˆ†ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚„çµŒé¨“ã§é¸ã¶ã—ã‹ã‚ã‚Šã¾ã›ã‚“ã€‚

ä¾‹ãˆã°ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’é¿ã‘ã‚‹ã¹ãã¨ã„ã†æ„è¦‹ãŒã‚ã‚Šã€ç§ã‚‚åŒæ„ã—ã¾ã™ãŒã€ä¸€æ–¹ã§PWAã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ãªã©APIã‚„ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ä¾å­˜ã§ããªã„ã‚³ãƒ¼ãƒ‰ãŒå­˜åœ¨ã—ã€å¤§é‡ã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«ä¿æœ‰ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ãƒ‰ãƒ¡ã‚¤ãƒ³ã®å ´åˆã€ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’æ¡ç”¨ã™ã‚‹ã‚±ãƒ¼ã‚¹ã¯é–“é•ã„ã§ã¯ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ä»¥ä¸‹ã«è¨­è¨ˆã®å‚è€ƒã«ãªã‚‹ã ã‚ã†ã„ãã¤ã‹ã®è¨˜äº‹ã‚’è²¼ã‚Šã¾ã™ãŒã€è¿‘å¹´ã®è‰¯ã„è¨­è¨ˆã®å…±é€šèªè­˜ã¨ã—ã¦ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆé–¢å¿ƒãŒè¿‘ã„ã‚³ãƒ¼ãƒ‰ã¯è¿‘ãã«ãŠã„ãŸæ–¹ãŒè‰¯ã„ï¼‰ãŒå¤§åˆ‡ã«ã•ã‚Œã¦ã„ã¾ã™ã€‚

-   [Feature slicedãƒ‘ã‚¿ãƒ¼ãƒ³](https://feature-sliced.design/)
-   [Package by featureãƒ‘ã‚¿ãƒ¼ãƒ³](https://medium.com/sahibinden-technology/package-by-layer-vs-package-by-feature-7e89cde2ae3a)
-   [App Routerãƒ‘ã‚¿ãƒ¼ãƒ³](https://nextjs.org/docs/app/getting-started/project-structure)

### é–‘è©±ï¼šUIã®å…±é€šåŒ–ã«ã¤ã„ã¦

UIã®å…±é€šåŒ–ã¯ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ã¯ãªãã€ãƒ‡ã‚¶ã‚¤ãƒ³ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§é©åˆ‡ã«è¨­è¨ˆã™ã¹ãã ã¨æ„Ÿã˜ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚

ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„å…±é€šåŒ–ã¨ã„ã£ãŸãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ãŒãªã„çŠ¶æ…‹ã§ã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å´ã§è¦‹ãŸç›®ãŒä¼¼ã¦ã‚‹ã¨ã‹ã‚³ãƒ¼ãƒ‰é‡è¤‡ã‚’æ¸›ã‚‰ã—ãŸã„ã¨ã„ã†ç›®çš„ã§ç„¡ç†ã«å…±é€šåŒ–ã™ã‚‹ã¨å¤§ä½“å¤±æ•—ã—ã¾ã™ã€‚ UIã®ã‚³ãƒ¼ãƒ‰é‡è¤‡ã‚„è¦‹ãŸç›®ã®æºã‚Œã‚’æ”¹å–„ã™ã‚‹ã®ã¯ã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã§ã¯ãªãUIãƒ‡ã‚¶ã‚¤ãƒ³ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è©±ã ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚ï¼ˆãã®ãŸã‚ã«ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒå–ã‚Œã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚‚æ²¢å±±ã‚ã‚‹ã¨ã¯æ€ã„ã¾ã™ãŒï¼‰

è¿‘å¹´ã§ã¯Figmaã®ç™»å ´ãªã©ã§ã€ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ãŒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã¨ã„ã£ãŸã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã®å…±é€šè¨€èªã‚„ãã®ãŸã‚ã®è¡¨ç¾ã‚’ç²å¾—ã—ãŸã“ã¨ã§ã€ä¸Šæ‰‹ãã„ã£ã¦ã‚‹ãƒãƒ¼ãƒ ã‚‚å¢—ãˆã¦ããŸã®ã§ã¯ã¨ã„ã†å°è±¡ã‚‚ã‚ã‚Šã¾ã™ã€‚

## ãŠã‚ã‚Šã«

Reactå›ºæœ‰ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚„ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãªã‚‰ã§ã¯ã®é¢å€’ã•ã¯ã„ãã¤ã‹ã‚ã‚Œã©ã€ä½•ã‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ãŠã„ã¦ç‰¹åˆ¥ãªã“ã¨ã¯ãªã„ã€å‡¡äº‹å¾¹åº•ã ãªã¨ã‚ã‚‰ãŸã‚ã¦æ„Ÿã˜ã¦ãŠã‚Šã¾ã™ã€‚

å¾¹åº•ã™ã¹ãå‡¡äº‹ã‚’ã¾ã¨ã‚ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚

-   é–¢æ•°ã¯è‡ªèº«ã®è²¬å‹™ã‚’è€ƒãˆå°ã•ãã™ã‚‹ã€‚
-   çŠ¶æ…‹ã¯å­˜åœ¨å¯èƒ½ãªã‚¹ã‚³ãƒ¼ãƒ—ã‚’å°ã•ãã™ã‚‹ã€‚
-   ãƒ†ã‚¹ãƒˆã—ãŸããªã‚‹ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„hooksã®ä¸­ã«é•·ã€…æ›¸ã‹ãªã„ã€‚è¤‡é›‘æ€§ã‚’å±€æ‰€åŒ–ã—ãƒ†ã‚¹ãƒˆã—ã‚„ã™ã„çŠ¶æ…‹ã«ã—ã¦ãŠãã€‚
-   useEffectã‚’æ¿«ç”¨ã—ãªã„ï¼ˆã“ã“ã¯æ®‹å¿µãªãŒã‚‰Reactã®å‹‰å¼·ãŒå¿…è¦ã§ã™ğŸ˜‚ï¼‰
-   ã‚€ã‚„ã¿ãªå…±é€šåŒ–ã‚’ã—ãªã„ã€‚
-   è²¬å‹™ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†ã‘ã«ä¸€ã¤ã®æ­£è§£ã¯ãªãã€è‡ªåˆ†ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã«é©ã—ãŸã‚‚ã®ã‚’è€ƒãˆç¶šã‘ã‚‹ã€‚

åˆ¥ã®è¦³ç‚¹ã§Reactã‚’ã¡ã‚ƒã‚“ã¨æ›¸ãã“ã¨ã¯ã€è¨€èªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å•ã‚ãšè¤‡æ•°äººã§é–‹ç™ºã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ãŠã‘ã‚‹ã„ãã¤ã‚‚ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’å­¦ã‚“ã§ã„ãã“ã¨ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚

ç­†è€…ã¯ã‚‚ã†ã™ãã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æ­´10å¹´ç›®ã«çªå…¥ã—ã¾ã™ãŒã€æ–°å…¥ç¤¾å“¡ã ã£ãŸæ™‚ä»£ã‹ã‚‰ReactãŒã¨ã‚‚ã«ã‚ã‚Šã€ãã“ã‹ã‚‰å­¦ã‚“ã ã“ã¨ãŒã‚ã¾ã‚Šã«å¤šã„ãŸã‚ã€ã‚­ãƒ£ãƒªã‚¢ã‚’æŒ¯ã‚Šè¿”ã‚‹ã¨ãƒ«ãƒ‰ã‚¦ã‚¤ãƒ¼ã‚¯ã®ã‚ˆã†ãªæ°—æŒã¡ã§ã„ã¾ã™ã€‚

> ã‚ã‚ãšã£ã¨ã€ãšã£ã¨å´ã«ã„ã¦ãã‚ŒãŸã®ã‹ã€‚æˆ‘ãŒå¸«ã€å°ãã®Reactã‚ˆâ€¦
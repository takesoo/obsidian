---
tags:
  - 良いコード悪いコードで学ぶ設計入門
---
- 邪悪な構造に陥りがちなUserクラス
	- ログインユーザーの概念に加えて、法人ユーザーなどの概念も混ざりがち
- モデリングの考え方とあるべき構造
	- システムとは何か
		- 多数の構成要素が連携して、全体としてひとつの目的を果たすもの
		- システムは目的達成のための手段
	- システム構造とモデリング
		- システム構造を単純化して図示したものがモデル
		- 特定の目的達成のために最低限考慮が必要な要素を備えたものがモデル
	- ソフトウェア設計におけるモデリング
		- 目的ごとに定義を絞ることでモデルを小さく分割できる
- 良くないモデルの問題点と解決方法
	- Userとシステムの関係
		- 現実では購入者と在庫係などがある
	- 仮想世界を表現する情報システム
		- 現実世界の概念のみをコンピューターの世界へ投影した仮想現実
	- 目的別にモデリングする
		- 現実世界での物理的な存在と、情報システム上のモデルが1:1になるとは限らず、1:多の関係になるケースがある
	- モデルはモノではなく目的達成手段
		- 目的達成手段と解釈することでうまくモデリングできる
	- 単一責任とは単一目的
		- 特定の目的に特化して設計することで、変更に強い高品質な構造になる
	- モデルの見直し方
		- そのモデルが達せしようとしている目的をすべて洗い出す
		- 目的それぞれ特化したモデリングをし直す
		- 目的駆動名前設計にもとづき、モデルに命名する
		- モデルに目的外の要素が入り込んでいる場合、さらに見直す
	- モデルと実装は必ず相互にフィードバックする
		- モデルとクラスは必ずしも1:1になるとは限らない。1つのモデルが複数のクラスで構成されることもある。
		- クラス設計や実装で気づいたことは必ずモデルにフィードバックする。さらに良いモデリングをする材料になる。　
- 機能性を左右するモデリング
	- 機能性とは顧客のニーズを満たす度合い
	- 裏に隠れた真の目的を見破る
		- 商品購入は法的には売買契約で、支払期日や決済方法の記録が必要
	- 機能性をイノベートする「深いモデル」
		- 目的達成手段としてモデルを解釈し、抽象化すると、モデルに発展性が生まれる
		- 優れた変換能力を備えるようモデルを設計することが、機能性の革新に繋がる
		- 本質的課題を解決し、機能性の革新に貢献するモデルを、ドメイン駆動設計では[[深いモデル]]と呼ぶ
---
Status:
  - 読みかけ
Auther: 
Purpuse: 
Summary: 
Start: 2024-10-10
End: 
tags:
  - book
---
## 第1部 ドメインモデルを機能させる
[[ドメイン駆動設計|ドメイン駆動開発]]の基本的な目標を紹介する
用語を定義し、コミュニケーションと設計の推進のために[[ドメインモデル]]を使用する意味を概観する。
### 第1章 知識を噛み砕く
- [[ビジネスエキスパート|ドメインエキスパート]]との会話を重ねることので[[業務知識|ドメイン知識]]を噛み砕き、重要かつ有用な概念を抽出して[[ドメインモデル]]を作り出す。ドメインモデルを介することで開発チームメンバーはドメイン知識を深めることができる。ドメインエキスパートも知識を提供するほどモデルに反映される。そうして、モデルはプロジェクトの中を流れ続ける情報を体系化するためのツールとなっていく。
- ドメインについて継続的に学習し続けることが大切。そうすることでドメインについての無知の知を自覚し、またチームの再編成などによる知の流出に対抗できる。
- ドメインモデルの変化に並行してリファクタリングする。ドメインモデルの振る舞いの本質を捉えて、[[デザインパターン]]などを駆使して実装に落とし込む。
- 役に立つドメインモデルは簡単には見つからない。ドメインへの観察やドメインエキスパートとの対話を通じて、ドメインを深く探求する。そうすることで本質を捉えてドメインモデルへと抽象化できる。
### 第2章 コミュニケーションと言語の使い方
- [[ユビキタス言語]]を用いて、ドメインエキスパートと技術チーム、さらにチームメンバー間の認識を共通にする。ユビキタス言語を用いたドメイン知識の表現を確認し、現実と合わないものは修正される。さらにその変更はドメインモデルに対する変更にもなり、コードをリファクタリングする。
- 豊富な知識を持つドメインエキスパートがモデルを理解できないとしたら、モデルに何か問題があるのだ。
- UMLですべての設計を説明するのではなく、詳細なドキュメントを図で補足する。
- ドキュメントはコードや会話での表現を補わなければならない。
- ドキュメントは活動の役に立たなければならず、最新の状態を保たなければならない。
- ドメイン理解のためには説明のためのモデル（UMLではない図）を使うことも有効。
### 第3章 モデルと実装を結びつける
- モデル駆動設計
	- ドメインを分析してできる分析モデルと、設計によってできるモデルに齟齬があるのは望ましくない。両方の目的を満たす単一のモデルを見つけ出し、モデルがコードにも表現されている状態を目指す。
- 設計が基づくモデルが、ユーザーとドメインエキスパートの基本的な関心事を反映していれば、他の設計アプローチを用いた場合に比べて、その設計の骨格をよりはっきりとユーザーにさらけ出すことができる。
- モデルに貢献する技術的な人はだれでも、一定の時間をコードに触れることに費やさなければならない。（中略）すべての開発者は、モデルに関する議論にいずれかの段階で参加して、ドメインエキスパートと話をしなければならない。
- **ドメイン駆動設計は、モデルがアプリケーションの問題を解決できるようにする。知識を噛み砕くことで、チームは、混沌とした情報のとめどない流れを実用的なモデルへと蒸留する。モデル駆動設計は、モデルと実装を密接に結びつける。ユビキタス言語はそれらすべての情報のための水路であり、開発者、ドメインエキスパート、ソフトウェアの間で情報がよどみなく流れるようにしてくれる。その結果できるのは、コアドメインに対する基本的な理解に基づいた、豊富な機能を提供するソフトウェアである。**
## 第2部 モデル駆動設計の構成要素
オブジェクト指向ドメインモデリングにおけるベストプラクティスのコアを要約して、基本的な構成要素の集まりを作り上げる。
モデルと実装を互いに整合させ、片方がもう一方の有効性を補強する状態を維持するような意思決定に集中する。
### 第4章 ドメインを隔離する
- [[レイヤードアーキテクチャ]]を使ってドメイン層とそれ以外を区別し、ドメイン層でドメインロジックを浮き彫りにする
### 第5章 ソフトウェアで表現されたモデル
- 関連
	- モデル間の関係性をできるだけ制限することで相互依存性が減り、設計がシンプルになる
		- 関連を辿る方向を強制する
		- 限定子を付加して多重度を効果的に減らす
		- 本質的ではない関連を除去する
- エンティティ
	- 同一性によって定義されるオブジェクト。同一性と関連した属性（名前や電話番号など）はそのエンティティと一緒に留まる。
- 値オブジェクト
	- 同一性によって定義されないオブジェクト。あるモデル要素について、その属性だけを関心の対象とする。
	- 不変とする
	- インスタンスの共有はパフォーマンス上の問題を解決する時以外はしないほうがいい。
- サービス
	- モデルにおいて独立したインターフェースとして提供される操作で、エンティティと値オブジェクトのように状態をカプセル化しない。
	- 優れたサービスには３つの特徴がある
		- 操作がドメインの概念に関係しており、その概念がエンティティや値オブジェクトの自然な一部ではない。
		- ドメインモデルの他の要素の観点からインターフェースが定義されている
		- 操作に状態がない。
	- アプリケーションサービス
		- ドメイン知識の表現以外のサービス。CSVインポート・エクスポートなど。
	- ドメインサービス
		- ドメイン知識を表現するが、いずれのドメインモデルにも属さないもの。
- モジュール（パッケージ）
	- ある概念でクラスをまとめたもの。その設計を見る次に開発者に、それらを一まとめに考えるよう伝えていることになる。モデルが物語だとすれば、モジュールは章に相当する。
	- モジュール内は高凝集、モジュール間は低結合にする
	- モジュール名はユビキタス言語の一部をつけること
	- システムをUI、アプリケーション、ドメイン、インフラと技術的な関心で単純な垂直分割するのではなく、ドメインとインフラは単一の概念オブジェクトとして水平分割するなど、凝集度と結合度を考えて設計すること
- モデリングパラダイム
	- モデル駆動設計をする場合は[[オブジェクト指向|オブジェクト指向設計]]が合っている
### 第6章 ドメインオブジェクトのライフサイクル
モデル駆動設計を実践するにあたり、ドメインオブジェクトのライフサイクルを通じてその整合性を維持することは難しい。これには、①集約によってモデルを引き締め、②ファクトリによって複雑なオブジェクトや集約を生成、再構築し、③リポジトリによって永続化されたオブジェクトへのアクセス手段を提供することで対応する。
- 集約（AGGREGATES）
	- エンティティと値オブジェクトを集約の中にまとめ、集約の外部から内部へとアクセスする時は、ルートとなるエンティティを経由して一時的な参照を渡す。こうすることで集約内にあるオブジェクトと集約全体に対して普遍条件を全て強制することができる
		- 不変条件とは、データが変更されるときは常に維持されなればならない一貫性のルールのこと。z
- ファクトリ
- リポジトリ
- RDBに合わせて設計する
### 第7章 言語を使用する：応用例
## 第3部 より深い洞察へ向かうリファクタリング
個別の構成要素を超えて、利益をもたらす実用的なモデルを組み立てる
## 第4部 戦略的設計
大規模で複雑なシステムとの連携を例に実践

## ロジックツリー
### A
- [[a]]
### B
- b1
- b2
### C


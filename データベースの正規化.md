---
aliases:
  - 正規化
tags:
  - データベース
  - database
---
- データベースを[[正規形]]にするための作業。データベースで保持するデータの冗長性を排除し、一貫性と効率性を実現する。または、テーブルの全ての列が[[関数従属性]]を満たすように整理していくこと。
- 第1正規化から第5正規化まであるが、一般的に第3正規化まで理解していればOK
## 第1正規化
- 列方向のデータ重複を行方向に移動
- 不要な列を削除する
	
| <u>社員ID</u> | 社員名 | 子             |
| ----------- | --- | ------------- |
| 000A        | 加藤  | 達夫<br>慎二      |
| 000B        | 藤本  |               |
| 001F        | 三島  | 淳<br>陽子<br>清美 |
ひとつのセルにはひとつの値（[[スカラ値]]）だけになっておらず、関数従属性を満たせていない。それぞれを別の行（または列）に分ける。

| <u>社員ID</u> | 社員名 | 子   |
| ----------- | --- | --- |
| 000A        | 加藤  | 達夫  |
| 000A        | 加藤  | 慎二  |
| 000B        | 藤本  |     |
| 001F        | 三島  | 淳   |
| 001F        | 三島  | 陽子  |
| 001F        | 三島  | 清美  |
（子1, 子2, 子3と列を増やす方法もある）

## 第2正規化
[[部分関数従属]]を解消し、[[完全関数従属]]のみのテーブルを作る

| <u>会社コード</u> | 会社名  | <u>社員ID</u> | 社員名 | 年齢  | 部署コード | 部署名 |
| ------------ | ---- | ----------- | --- | --- | ----- | --- |
| C0001        | A 商事 | 000A        | 加藤  | 40  | D01   | 開発  |
| C0001        | A 商事 | 000B        | 藤本  | 32  | D02   | 人事  |
| C0001        | A 商事 | 001F        | 三島  | 50  | D03   | 営業  |
| C0002        | B 化学 | 000A        | 斉藤  | 47  | D03   | 営業  |
| C0002        | B 化学 | 009F        | 田島  | 25  | D01   | 開発  |
| C0002        | B 化学 | 010A        | 渋谷  | 33  | D04   | 総務  |
会社名は会社コードに部分関数従属している。社員の情報が不明の会社の情報を登録できず、また会社コードと会社名で不整合が起こりうる状態にある。それぞれのエンティティにテーブルを分割する。

| <u>会社コード</u> | <u>社員ID</u> | 社員名 | 年齢  | 部署コード | 部署名 |
| ------------ | ----------- | --- | --- | ----- | --- |
| C0001        | 000A        | 加藤  | 40  | D01   | 開発  |
| C0001        | 000B        | 藤本  | 32  | D02   | 人事  |
| C0001        | 001F        | 三島  | 50  | D03   | 営業  |
| C0002        | 000A        | 斉藤  | 47  | D03   | 営業  |
| C0002        | 009F        | 田島  | 25  | D01   | 開発  |
| C0002        | 010A        | 渋谷  | 33  | D04   | 総務  |

| 会社コード | 会社名  |
| ----- | ---- |
| C0001 | A 商事 |
| C0002 | B 化学 |

## 第3正規化
[[推移的関数従属]]を解消する
第2正規化の際のテーブルは、さらに分割できる

| <u>会社コード</u> | <u>社員ID</u> | 社員名 | 年齢  | 部署コード |
| ------------ | ----------- | --- | --- | ----- |
| C0001        | 000A        | 加藤  | 40  | D01   |
| C0001        | 000B        | 藤本  | 32  | D02   |
| C0001        | 001F        | 三島  | 50  | D03   |
| C0002        | 000A        | 斉藤  | 47  | D03   |
| C0002        | 009F        | 田島  | 25  | D01   |
| C0002        | 010A        | 渋谷  | 33  | D04   |

| <u>部署コード</u> | 部署名 |
| ------------ | --- |
| D01          | 開発  |
| D02          | 人事  |
| D03          | 営業  |
| D03          | 営業  |
| D01          | 開発  |
| D04          | 総務  |
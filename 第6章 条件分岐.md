---
tags:
  - 良いコード悪いコードで学ぶ設計入門
---
- 条件分岐のネストによる可読性低下
	- 早期returnでネスト解消
	- 見通しを悪くするelse句も早期returnで解決
- switch文の重複
	- 即座にswitch文を書いてしまう
	- 同じ条件式のswitch文が複数書かれていく
	- 仕様変更時の修正漏れ（case文追加漏れ）
	- 爆発的に増殖するswitch文の重複
	- 条件分岐を一箇所にまとめる
		- [[単一責務の法則|単一責任選択の原則]]
	- よりスマートにswitch文重複を解消するinterface
		- インターフェースとは抽象クラスのこと。具象クラスがインターフェースを継承することで条件分岐が不要になる
	- interfaceをswitch文重複に応用（[[ストラテジパターン]]）
		- インターフェースを用いて処理を一斉に切り替える設計
- 条件分岐の重複とネスト
	- [[ポリシーパターン]]で条件を集約する
		- ポリシールールクラスを用意し、ポリシークラスでどのルールが条件として採用されるかを定義する
- 型チェックで分岐しないこと
	- 型チェックで分岐しているということは[[リスコフの置換原則]]に違反している
- interfaceの使いこなしが中級者への第一歩
	- 分岐を描きそうになったら、まずinterface設計
	- （場合によってはkindプロパティでの条件分岐のほうが実装コストが低いことも往々にしてあるのでケースバイケースで選ぶ）
- フラグ引数
	- フラグ引数によって何が起きるか、メソッド内部を見る必要があり、可読性を低下させる
	- メソッドを分離する
		- フラグ引数付きのメソッドは機能ごとに分離させる
	- 切り替え機構をストラテジパターンで実装する